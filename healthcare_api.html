<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<title>fhir_utils.healthcare_api API documentation</title>
<meta name="description" content="" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>fhir_utils.healthcare_api</code></h1>
</header>
<section id="section-intro">
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python"># -*- coding: utf-8 -*-
from google.auth.transport import requests
from google.oauth2 import service_account
import os


class HealthcareApi:
    &#34;&#34;&#34;
    This class provides the basic methods for interacting with FHIR resources in the Google Healthcare API.
    Reference:
        https://cloud.google.com/healthcare-api/docs/reference/rest
    &#34;&#34;&#34;

    def __init__(self, project_id, location):
        self.credentials = service_account.Credentials.from_service_account_file(os.environ[&#34;GOOGLE_APPLICATION_CREDENTIALS&#34;])
        self.scoped_credentials = self.credentials.with_scopes([&#34;https://www.googleapis.com/auth/cloud-platform&#34;])
        self.session = requests.AuthorizedSession(self.scoped_credentials)
        self.project_id = project_id
        self.location = location
        self.base_url = &#34;https://healthcare.googleapis.com/v1&#34;
        self.url = (f&#34;{self.base_url}/projects/{self.project_id}/locations/{self.location}&#34;)
        self.header = {&#34;Content-Type&#34;: &#34;application/fhir+json;charset=utf-8&#34;}

    def create(
            self,
            dataset_id: str,
            fhir_store_id: str,
            resource: str,
            payload: dict
            ) -&gt; dict:
        &#34;&#34;&#34;Create a new resource in the FHIR store&#34;&#34;&#34;
        resource_path = f&#34;{self.url}/datasets/{dataset_id}/fhirStores/{fhir_store_id}/fhir/{resource}&#34;

        response = self.session.post(resource_path, headers=self.header, json=payload)

        return {&#34;status_code&#34;: response.status_code, &#34;body&#34;: response.json()}

    def update(
            self,
            dataset_id: str,
            fhir_store_id: str,
            resource: str,
            resource_id: str,
            payload: dict,
            ) -&gt; dict:
        &#34;&#34;&#34;Update an existing resource in the FHIR store&#34;&#34;&#34;
        resource_path = f&#34;{self.url}/datasets/{dataset_id}/fhirStores/{fhir_store_id}/fhir/{resource}/{resource_id}&#34;

        response = self.session.put(resource_path, headers=self.header, json=payload)

        return {&#34;status_code&#34;: response.status_code, &#34;body&#34;: response.json()}

    def update_conditional(
            self,
            dataset_id: str,
            fhir_store_id: str,
            resource: str,
            condition: str,
            payload: dict,
            ) -&gt; dict:
        &#34;&#34;&#34;
        If a resource is found based on the search criteria specified in the query parameters,
         updates the entire contents of that resource.
        If the search criteria identify zero matches, and the supplied resource body contains an id,
         and the FHIR store has enableUpdateCreate set, creates the resource with the client-specified ID.
        If the search criteria identify zero matches, and the supplied resource body does not contain an id,
         the resource is created with a server-assigned ID as per the create method.

        Feature only available in beta endpoint.
        See:
            https://cloud.google.com/healthcare-api/docs/reference/rest/v1beta1/projects.locations.datasets.fhirStores.fhir/conditionalUpdate

        Response code:
            200 Success
                Updated or created successfully
            412 Precondition Failed
                If the search criteria identify more than one match

        &#34;&#34;&#34;

        base_url_beta = &#34;https://healthcare.googleapis.com/v1beta1&#34;
        url_beta = f&#34;{base_url_beta}/projects/{self.project_id}/locations/{self.location}&#34;

        resource_path = f&#34;{url_beta}/datasets/{dataset_id}/fhirStores/{fhir_store_id}/fhir/{resource}&#34;
        resource_path += f&#34;?{condition}&#34;

        response = self.session.put(resource_path, headers=self.header, json=payload)

        return {&#34;status_code&#34;: response.status_code, &#34;body&#34;: response.json()}

    def read(
            self,
            dataset_id: str,
            fhir_store_id: str,
            resource: str,
            resource_id: str
            ) -&gt; dict:
        &#34;&#34;&#34;Read the contents of a specific resource in the FHIR store&#34;&#34;&#34;
        resource_path = f&#34;{self.url}/datasets/{dataset_id}/fhirStores/{fhir_store_id}/fhir/{resource}/{resource_id}&#34;

        response = self.session.get(resource_path, headers=self.header)

        return {&#34;status_code&#34;: response.status_code, &#34;body&#34;: response.json()}

    def read_conditional(
            self,
            dataset_id: str,
            fhir_store_id: str,
            resource: str,
            condition: str
            ) -&gt; dict:
        &#34;&#34;&#34;
        If a resource is found based on the search criteria specified in the query parameters,
        read the entire contents of that resource.
        &#34;&#34;&#34;
        resource_path = f&#34;{self.url}/datasets/{dataset_id}/fhirStores/{fhir_store_id}/fhir/{resource}&#34;
        resource_path += f&#34;?{condition}&#34;

        response = self.session.get(resource_path, headers=self.header)

        return {&#34;status_code&#34;: response.status_code, &#34;body&#34;: response.json()}

    def delete(
            self,
            dataset_id: str,
            fhir_store_id: str,
            resource: str,
            resource_id: str
            ) -&gt; dict:
        &#34;&#34;&#34;
        Delete a resource from the FHIR store

        Response code:
            200 Success
                If the resource was deleted or not found
        &#34;&#34;&#34;
        resource_path = f&#34;{self.url}/datasets/{dataset_id}/fhirStores/{fhir_store_id}/fhir/{resource}/{resource_id}&#34;

        response = self.session.delete(resource_path, headers=self.header)

        return {&#34;status_code&#34;: response.status_code, &#34;body&#34;: response.json()}


class FastCRUD(HealthcareApi):
    &#34;&#34;&#34;The  FastCRUD  class is a subclass of HealthcareApi that provides additional convenience methods for most common CRUD actions.&#34;&#34;&#34;

    def __init__(self, project_id, location):
        super().__init__(project_id, location)

    def resource_search_lastupdated(
            self,
            dataset_id: str,
            fhir_store_id: str,
            resource: str,
            since: str
            ) -&gt; dict:
        &#34;&#34;&#34;Read the entries from a resource in the FHIR store that were last updated after a specific date and time&#34;&#34;&#34;
        parameter = f&#34;_lastUpdated=gt{since}&#34;
        return self.read_conditional(dataset_id, fhir_store_id, resource, parameter)

    def patient_search(
            self,
            dataset_id: str,
            fhir_store_id: str,
            cpf: str
            ) -&gt; dict:
        &#34;&#34;&#34;Read the entries from Patient resource in the FHIR store based on tax id (CPF)&#34;&#34;&#34;
        parameter = f&#34;identifier=https://rnds-fhir.saude.gov.br/NamingSystem/cpf|{cpf}&#34;
        return self.read_conditional(dataset_id, fhir_store_id, &#34;Patient&#34;, parameter)

    def patient_update(
            self,
            dataset_id: str,
            fhir_store_id: str,
            cpf: str,
            payload: dict
            ) -&gt; dict:
        &#34;&#34;&#34;Update the entries from Patient resource in the FHIR store based on tax id (CPF)&#34;&#34;&#34;
        parameter = f&#34;identifier=https://rnds-fhir.saude.gov.br/NamingSystem/cpf|{cpf}&#34;
        return self.update_conditional(dataset_id, fhir_store_id, &#34;Patient&#34;, parameter, payload)</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="fhir_utils.healthcare_api.FastCRUD"><code class="flex name class">
<span>class <span class="ident">FastCRUD</span></span>
<span>(</span><span>project_id, location)</span>
</code></dt>
<dd>
<div class="desc"><p>The
FastCRUD
class is a subclass of HealthcareApi that provides additional convenience methods for most common CRUD actions.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class FastCRUD(HealthcareApi):
    &#34;&#34;&#34;The  FastCRUD  class is a subclass of HealthcareApi that provides additional convenience methods for most common CRUD actions.&#34;&#34;&#34;

    def __init__(self, project_id, location):
        super().__init__(project_id, location)

    def resource_search_lastupdated(
            self,
            dataset_id: str,
            fhir_store_id: str,
            resource: str,
            since: str
            ) -&gt; dict:
        &#34;&#34;&#34;Read the entries from a resource in the FHIR store that were last updated after a specific date and time&#34;&#34;&#34;
        parameter = f&#34;_lastUpdated=gt{since}&#34;
        return self.read_conditional(dataset_id, fhir_store_id, resource, parameter)

    def patient_search(
            self,
            dataset_id: str,
            fhir_store_id: str,
            cpf: str
            ) -&gt; dict:
        &#34;&#34;&#34;Read the entries from Patient resource in the FHIR store based on tax id (CPF)&#34;&#34;&#34;
        parameter = f&#34;identifier=https://rnds-fhir.saude.gov.br/NamingSystem/cpf|{cpf}&#34;
        return self.read_conditional(dataset_id, fhir_store_id, &#34;Patient&#34;, parameter)

    def patient_update(
            self,
            dataset_id: str,
            fhir_store_id: str,
            cpf: str,
            payload: dict
            ) -&gt; dict:
        &#34;&#34;&#34;Update the entries from Patient resource in the FHIR store based on tax id (CPF)&#34;&#34;&#34;
        parameter = f&#34;identifier=https://rnds-fhir.saude.gov.br/NamingSystem/cpf|{cpf}&#34;
        return self.update_conditional(dataset_id, fhir_store_id, &#34;Patient&#34;, parameter, payload)</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="fhir_utils.healthcare_api.HealthcareApi" href="#fhir_utils.healthcare_api.HealthcareApi">HealthcareApi</a></li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="fhir_utils.healthcare_api.FastCRUD.patient_search"><code class="name flex">
<span>def <span class="ident">patient_search</span></span>(<span>self, dataset_id: str, fhir_store_id: str, cpf: str) ‑> dict</span>
</code></dt>
<dd>
<div class="desc"><p>Read the entries from Patient resource in the FHIR store based on tax id (CPF)</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def patient_search(
        self,
        dataset_id: str,
        fhir_store_id: str,
        cpf: str
        ) -&gt; dict:
    &#34;&#34;&#34;Read the entries from Patient resource in the FHIR store based on tax id (CPF)&#34;&#34;&#34;
    parameter = f&#34;identifier=https://rnds-fhir.saude.gov.br/NamingSystem/cpf|{cpf}&#34;
    return self.read_conditional(dataset_id, fhir_store_id, &#34;Patient&#34;, parameter)</code></pre>
</details>
</dd>
<dt id="fhir_utils.healthcare_api.FastCRUD.patient_update"><code class="name flex">
<span>def <span class="ident">patient_update</span></span>(<span>self, dataset_id: str, fhir_store_id: str, cpf: str, payload: dict) ‑> dict</span>
</code></dt>
<dd>
<div class="desc"><p>Update the entries from Patient resource in the FHIR store based on tax id (CPF)</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def patient_update(
        self,
        dataset_id: str,
        fhir_store_id: str,
        cpf: str,
        payload: dict
        ) -&gt; dict:
    &#34;&#34;&#34;Update the entries from Patient resource in the FHIR store based on tax id (CPF)&#34;&#34;&#34;
    parameter = f&#34;identifier=https://rnds-fhir.saude.gov.br/NamingSystem/cpf|{cpf}&#34;
    return self.update_conditional(dataset_id, fhir_store_id, &#34;Patient&#34;, parameter, payload)</code></pre>
</details>
</dd>
<dt id="fhir_utils.healthcare_api.FastCRUD.resource_search_lastupdated"><code class="name flex">
<span>def <span class="ident">resource_search_lastupdated</span></span>(<span>self, dataset_id: str, fhir_store_id: str, resource: str, since: str) ‑> dict</span>
</code></dt>
<dd>
<div class="desc"><p>Read the entries from a resource in the FHIR store that were last updated after a specific date and time</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def resource_search_lastupdated(
        self,
        dataset_id: str,
        fhir_store_id: str,
        resource: str,
        since: str
        ) -&gt; dict:
    &#34;&#34;&#34;Read the entries from a resource in the FHIR store that were last updated after a specific date and time&#34;&#34;&#34;
    parameter = f&#34;_lastUpdated=gt{since}&#34;
    return self.read_conditional(dataset_id, fhir_store_id, resource, parameter)</code></pre>
</details>
</dd>
</dl>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="fhir_utils.healthcare_api.HealthcareApi" href="#fhir_utils.healthcare_api.HealthcareApi">HealthcareApi</a></b></code>:
<ul class="hlist">
<li><code><a title="fhir_utils.healthcare_api.HealthcareApi.create" href="#fhir_utils.healthcare_api.HealthcareApi.create">create</a></code></li>
<li><code><a title="fhir_utils.healthcare_api.HealthcareApi.delete" href="#fhir_utils.healthcare_api.HealthcareApi.delete">delete</a></code></li>
<li><code><a title="fhir_utils.healthcare_api.HealthcareApi.read" href="#fhir_utils.healthcare_api.HealthcareApi.read">read</a></code></li>
<li><code><a title="fhir_utils.healthcare_api.HealthcareApi.read_conditional" href="#fhir_utils.healthcare_api.HealthcareApi.read_conditional">read_conditional</a></code></li>
<li><code><a title="fhir_utils.healthcare_api.HealthcareApi.update" href="#fhir_utils.healthcare_api.HealthcareApi.update">update</a></code></li>
<li><code><a title="fhir_utils.healthcare_api.HealthcareApi.update_conditional" href="#fhir_utils.healthcare_api.HealthcareApi.update_conditional">update_conditional</a></code></li>
</ul>
</li>
</ul>
</dd>
<dt id="fhir_utils.healthcare_api.HealthcareApi"><code class="flex name class">
<span>class <span class="ident">HealthcareApi</span></span>
<span>(</span><span>project_id, location)</span>
</code></dt>
<dd>
<div class="desc"><p>This class provides the basic methods for interacting with FHIR resources in the Google Healthcare API.</p>
<h2 id="reference">Reference</h2>
<p><a href="https://cloud.google.com/healthcare-api/docs/reference/rest">https://cloud.google.com/healthcare-api/docs/reference/rest</a></p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class HealthcareApi:
    &#34;&#34;&#34;
    This class provides the basic methods for interacting with FHIR resources in the Google Healthcare API.
    Reference:
        https://cloud.google.com/healthcare-api/docs/reference/rest
    &#34;&#34;&#34;

    def __init__(self, project_id, location):
        self.credentials = service_account.Credentials.from_service_account_file(os.environ[&#34;GOOGLE_APPLICATION_CREDENTIALS&#34;])
        self.scoped_credentials = self.credentials.with_scopes([&#34;https://www.googleapis.com/auth/cloud-platform&#34;])
        self.session = requests.AuthorizedSession(self.scoped_credentials)
        self.project_id = project_id
        self.location = location
        self.base_url = &#34;https://healthcare.googleapis.com/v1&#34;
        self.url = (f&#34;{self.base_url}/projects/{self.project_id}/locations/{self.location}&#34;)
        self.header = {&#34;Content-Type&#34;: &#34;application/fhir+json;charset=utf-8&#34;}

    def create(
            self,
            dataset_id: str,
            fhir_store_id: str,
            resource: str,
            payload: dict
            ) -&gt; dict:
        &#34;&#34;&#34;Create a new resource in the FHIR store&#34;&#34;&#34;
        resource_path = f&#34;{self.url}/datasets/{dataset_id}/fhirStores/{fhir_store_id}/fhir/{resource}&#34;

        response = self.session.post(resource_path, headers=self.header, json=payload)

        return {&#34;status_code&#34;: response.status_code, &#34;body&#34;: response.json()}

    def update(
            self,
            dataset_id: str,
            fhir_store_id: str,
            resource: str,
            resource_id: str,
            payload: dict,
            ) -&gt; dict:
        &#34;&#34;&#34;Update an existing resource in the FHIR store&#34;&#34;&#34;
        resource_path = f&#34;{self.url}/datasets/{dataset_id}/fhirStores/{fhir_store_id}/fhir/{resource}/{resource_id}&#34;

        response = self.session.put(resource_path, headers=self.header, json=payload)

        return {&#34;status_code&#34;: response.status_code, &#34;body&#34;: response.json()}

    def update_conditional(
            self,
            dataset_id: str,
            fhir_store_id: str,
            resource: str,
            condition: str,
            payload: dict,
            ) -&gt; dict:
        &#34;&#34;&#34;
        If a resource is found based on the search criteria specified in the query parameters,
         updates the entire contents of that resource.
        If the search criteria identify zero matches, and the supplied resource body contains an id,
         and the FHIR store has enableUpdateCreate set, creates the resource with the client-specified ID.
        If the search criteria identify zero matches, and the supplied resource body does not contain an id,
         the resource is created with a server-assigned ID as per the create method.

        Feature only available in beta endpoint.
        See:
            https://cloud.google.com/healthcare-api/docs/reference/rest/v1beta1/projects.locations.datasets.fhirStores.fhir/conditionalUpdate

        Response code:
            200 Success
                Updated or created successfully
            412 Precondition Failed
                If the search criteria identify more than one match

        &#34;&#34;&#34;

        base_url_beta = &#34;https://healthcare.googleapis.com/v1beta1&#34;
        url_beta = f&#34;{base_url_beta}/projects/{self.project_id}/locations/{self.location}&#34;

        resource_path = f&#34;{url_beta}/datasets/{dataset_id}/fhirStores/{fhir_store_id}/fhir/{resource}&#34;
        resource_path += f&#34;?{condition}&#34;

        response = self.session.put(resource_path, headers=self.header, json=payload)

        return {&#34;status_code&#34;: response.status_code, &#34;body&#34;: response.json()}

    def read(
            self,
            dataset_id: str,
            fhir_store_id: str,
            resource: str,
            resource_id: str
            ) -&gt; dict:
        &#34;&#34;&#34;Read the contents of a specific resource in the FHIR store&#34;&#34;&#34;
        resource_path = f&#34;{self.url}/datasets/{dataset_id}/fhirStores/{fhir_store_id}/fhir/{resource}/{resource_id}&#34;

        response = self.session.get(resource_path, headers=self.header)

        return {&#34;status_code&#34;: response.status_code, &#34;body&#34;: response.json()}

    def read_conditional(
            self,
            dataset_id: str,
            fhir_store_id: str,
            resource: str,
            condition: str
            ) -&gt; dict:
        &#34;&#34;&#34;
        If a resource is found based on the search criteria specified in the query parameters,
        read the entire contents of that resource.
        &#34;&#34;&#34;
        resource_path = f&#34;{self.url}/datasets/{dataset_id}/fhirStores/{fhir_store_id}/fhir/{resource}&#34;
        resource_path += f&#34;?{condition}&#34;

        response = self.session.get(resource_path, headers=self.header)

        return {&#34;status_code&#34;: response.status_code, &#34;body&#34;: response.json()}

    def delete(
            self,
            dataset_id: str,
            fhir_store_id: str,
            resource: str,
            resource_id: str
            ) -&gt; dict:
        &#34;&#34;&#34;
        Delete a resource from the FHIR store

        Response code:
            200 Success
                If the resource was deleted or not found
        &#34;&#34;&#34;
        resource_path = f&#34;{self.url}/datasets/{dataset_id}/fhirStores/{fhir_store_id}/fhir/{resource}/{resource_id}&#34;

        response = self.session.delete(resource_path, headers=self.header)

        return {&#34;status_code&#34;: response.status_code, &#34;body&#34;: response.json()}</code></pre>
</details>
<h3>Subclasses</h3>
<ul class="hlist">
<li><a title="fhir_utils.healthcare_api.FastCRUD" href="#fhir_utils.healthcare_api.FastCRUD">FastCRUD</a></li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="fhir_utils.healthcare_api.HealthcareApi.create"><code class="name flex">
<span>def <span class="ident">create</span></span>(<span>self, dataset_id: str, fhir_store_id: str, resource: str, payload: dict) ‑> dict</span>
</code></dt>
<dd>
<div class="desc"><p>Create a new resource in the FHIR store</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def create(
        self,
        dataset_id: str,
        fhir_store_id: str,
        resource: str,
        payload: dict
        ) -&gt; dict:
    &#34;&#34;&#34;Create a new resource in the FHIR store&#34;&#34;&#34;
    resource_path = f&#34;{self.url}/datasets/{dataset_id}/fhirStores/{fhir_store_id}/fhir/{resource}&#34;

    response = self.session.post(resource_path, headers=self.header, json=payload)

    return {&#34;status_code&#34;: response.status_code, &#34;body&#34;: response.json()}</code></pre>
</details>
</dd>
<dt id="fhir_utils.healthcare_api.HealthcareApi.delete"><code class="name flex">
<span>def <span class="ident">delete</span></span>(<span>self, dataset_id: str, fhir_store_id: str, resource: str, resource_id: str) ‑> dict</span>
</code></dt>
<dd>
<div class="desc"><p>Delete a resource from the FHIR store</p>
<p>Response code:
200 Success
If the resource was deleted or not found</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def delete(
        self,
        dataset_id: str,
        fhir_store_id: str,
        resource: str,
        resource_id: str
        ) -&gt; dict:
    &#34;&#34;&#34;
    Delete a resource from the FHIR store

    Response code:
        200 Success
            If the resource was deleted or not found
    &#34;&#34;&#34;
    resource_path = f&#34;{self.url}/datasets/{dataset_id}/fhirStores/{fhir_store_id}/fhir/{resource}/{resource_id}&#34;

    response = self.session.delete(resource_path, headers=self.header)

    return {&#34;status_code&#34;: response.status_code, &#34;body&#34;: response.json()}</code></pre>
</details>
</dd>
<dt id="fhir_utils.healthcare_api.HealthcareApi.read"><code class="name flex">
<span>def <span class="ident">read</span></span>(<span>self, dataset_id: str, fhir_store_id: str, resource: str, resource_id: str) ‑> dict</span>
</code></dt>
<dd>
<div class="desc"><p>Read the contents of a specific resource in the FHIR store</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def read(
        self,
        dataset_id: str,
        fhir_store_id: str,
        resource: str,
        resource_id: str
        ) -&gt; dict:
    &#34;&#34;&#34;Read the contents of a specific resource in the FHIR store&#34;&#34;&#34;
    resource_path = f&#34;{self.url}/datasets/{dataset_id}/fhirStores/{fhir_store_id}/fhir/{resource}/{resource_id}&#34;

    response = self.session.get(resource_path, headers=self.header)

    return {&#34;status_code&#34;: response.status_code, &#34;body&#34;: response.json()}</code></pre>
</details>
</dd>
<dt id="fhir_utils.healthcare_api.HealthcareApi.read_conditional"><code class="name flex">
<span>def <span class="ident">read_conditional</span></span>(<span>self, dataset_id: str, fhir_store_id: str, resource: str, condition: str) ‑> dict</span>
</code></dt>
<dd>
<div class="desc"><p>If a resource is found based on the search criteria specified in the query parameters,
read the entire contents of that resource.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def read_conditional(
        self,
        dataset_id: str,
        fhir_store_id: str,
        resource: str,
        condition: str
        ) -&gt; dict:
    &#34;&#34;&#34;
    If a resource is found based on the search criteria specified in the query parameters,
    read the entire contents of that resource.
    &#34;&#34;&#34;
    resource_path = f&#34;{self.url}/datasets/{dataset_id}/fhirStores/{fhir_store_id}/fhir/{resource}&#34;
    resource_path += f&#34;?{condition}&#34;

    response = self.session.get(resource_path, headers=self.header)

    return {&#34;status_code&#34;: response.status_code, &#34;body&#34;: response.json()}</code></pre>
</details>
</dd>
<dt id="fhir_utils.healthcare_api.HealthcareApi.update"><code class="name flex">
<span>def <span class="ident">update</span></span>(<span>self, dataset_id: str, fhir_store_id: str, resource: str, resource_id: str, payload: dict) ‑> dict</span>
</code></dt>
<dd>
<div class="desc"><p>Update an existing resource in the FHIR store</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def update(
        self,
        dataset_id: str,
        fhir_store_id: str,
        resource: str,
        resource_id: str,
        payload: dict,
        ) -&gt; dict:
    &#34;&#34;&#34;Update an existing resource in the FHIR store&#34;&#34;&#34;
    resource_path = f&#34;{self.url}/datasets/{dataset_id}/fhirStores/{fhir_store_id}/fhir/{resource}/{resource_id}&#34;

    response = self.session.put(resource_path, headers=self.header, json=payload)

    return {&#34;status_code&#34;: response.status_code, &#34;body&#34;: response.json()}</code></pre>
</details>
</dd>
<dt id="fhir_utils.healthcare_api.HealthcareApi.update_conditional"><code class="name flex">
<span>def <span class="ident">update_conditional</span></span>(<span>self, dataset_id: str, fhir_store_id: str, resource: str, condition: str, payload: dict) ‑> dict</span>
</code></dt>
<dd>
<div class="desc"><p>If a resource is found based on the search criteria specified in the query parameters,
updates the entire contents of that resource.
If the search criteria identify zero matches, and the supplied resource body contains an id,
and the FHIR store has enableUpdateCreate set, creates the resource with the client-specified ID.
If the search criteria identify zero matches, and the supplied resource body does not contain an id,
the resource is created with a server-assigned ID as per the create method.</p>
<p>Feature only available in beta endpoint.</p>
<h2 id="see">See</h2>
<p><a href="https://cloud.google.com/healthcare-api/docs/reference/rest/v1beta1/projects.locations.datasets.fhirStores.fhir/conditionalUpdate">https://cloud.google.com/healthcare-api/docs/reference/rest/v1beta1/projects.locations.datasets.fhirStores.fhir/conditionalUpdate</a></p>
<p>Response code:
200 Success
Updated or created successfully
412 Precondition Failed
If the search criteria identify more than one match</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def update_conditional(
        self,
        dataset_id: str,
        fhir_store_id: str,
        resource: str,
        condition: str,
        payload: dict,
        ) -&gt; dict:
    &#34;&#34;&#34;
    If a resource is found based on the search criteria specified in the query parameters,
     updates the entire contents of that resource.
    If the search criteria identify zero matches, and the supplied resource body contains an id,
     and the FHIR store has enableUpdateCreate set, creates the resource with the client-specified ID.
    If the search criteria identify zero matches, and the supplied resource body does not contain an id,
     the resource is created with a server-assigned ID as per the create method.

    Feature only available in beta endpoint.
    See:
        https://cloud.google.com/healthcare-api/docs/reference/rest/v1beta1/projects.locations.datasets.fhirStores.fhir/conditionalUpdate

    Response code:
        200 Success
            Updated or created successfully
        412 Precondition Failed
            If the search criteria identify more than one match

    &#34;&#34;&#34;

    base_url_beta = &#34;https://healthcare.googleapis.com/v1beta1&#34;
    url_beta = f&#34;{base_url_beta}/projects/{self.project_id}/locations/{self.location}&#34;

    resource_path = f&#34;{url_beta}/datasets/{dataset_id}/fhirStores/{fhir_store_id}/fhir/{resource}&#34;
    resource_path += f&#34;?{condition}&#34;

    response = self.session.put(resource_path, headers=self.header, json=payload)

    return {&#34;status_code&#34;: response.status_code, &#34;body&#34;: response.json()}</code></pre>
</details>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="fhir_utils" href="index.html">fhir_utils</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="fhir_utils.healthcare_api.FastCRUD" href="#fhir_utils.healthcare_api.FastCRUD">FastCRUD</a></code></h4>
<ul class="">
<li><code><a title="fhir_utils.healthcare_api.FastCRUD.patient_search" href="#fhir_utils.healthcare_api.FastCRUD.patient_search">patient_search</a></code></li>
<li><code><a title="fhir_utils.healthcare_api.FastCRUD.patient_update" href="#fhir_utils.healthcare_api.FastCRUD.patient_update">patient_update</a></code></li>
<li><code><a title="fhir_utils.healthcare_api.FastCRUD.resource_search_lastupdated" href="#fhir_utils.healthcare_api.FastCRUD.resource_search_lastupdated">resource_search_lastupdated</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="fhir_utils.healthcare_api.HealthcareApi" href="#fhir_utils.healthcare_api.HealthcareApi">HealthcareApi</a></code></h4>
<ul class="two-column">
<li><code><a title="fhir_utils.healthcare_api.HealthcareApi.create" href="#fhir_utils.healthcare_api.HealthcareApi.create">create</a></code></li>
<li><code><a title="fhir_utils.healthcare_api.HealthcareApi.delete" href="#fhir_utils.healthcare_api.HealthcareApi.delete">delete</a></code></li>
<li><code><a title="fhir_utils.healthcare_api.HealthcareApi.read" href="#fhir_utils.healthcare_api.HealthcareApi.read">read</a></code></li>
<li><code><a title="fhir_utils.healthcare_api.HealthcareApi.read_conditional" href="#fhir_utils.healthcare_api.HealthcareApi.read_conditional">read_conditional</a></code></li>
<li><code><a title="fhir_utils.healthcare_api.HealthcareApi.update" href="#fhir_utils.healthcare_api.HealthcareApi.update">update</a></code></li>
<li><code><a title="fhir_utils.healthcare_api.HealthcareApi.update_conditional" href="#fhir_utils.healthcare_api.HealthcareApi.update_conditional">update_conditional</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.10.0</a>.</p>
</footer>
</body>
</html>